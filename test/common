#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <alloca.h>

void afirma(int expected, int actual, char *code) {
  if (expected == actual) {
    printf("%s => %d\n", code, actual);
  } else {
    printf("%s => %d expected but got %d\n", code, expected, actual);
    exit(1);
  }
}

static int static_fn() { return 5; }
int ext1 = 5;
int *ext2 = &ext1;
int ext3 = 7;
int funció_externa_1(int x) { return x; }
int funció_externa_2(int x) { return x; }
int common_ext2 = 3;
static int common_local;

int retorna_fals() { return 512; }
int retorna_cert() { return 513; }
int retorna_car() { return (2<<8)+3; }
int retorna_curt() { return (2<<16)+5; }

int retorna_ucar() { return (2<<10)-1-4; }
int retorna_curt_sense_signe() { return (2<<20)-1-7; }

int retorna_car_signe() { return (2<<10)-1-4; }
int retorna_curt_signe() { return (2<<20)-1-7; }

int suma_tot(int n, ...) {
  va_list ap;
  va_start(ap, n);

  int sum = 0;
  for (int i = 0; i < n; i++)
    sum += va_arg(ap, int);
  return sum;
}

float suma_flotant(float x, float y) {
  return x + y;
}

double suma_doble(double x, double y) {
  return x + y;
}

int suma_deu_enter(int x1, int x2, int x3, int x4, int x5, int x6, int x7, int x8, int x9, int x10) {
  return x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10;
}

float suma_deu_reals(float x1, float x2, float x3, float x4, float x5, float x6, float x7, float x8, float x9, float x10) {
  return x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10;
}

double suma_deu_doble(double x1, double x2, double x3, double x4, double x5, double x6, double x7, double x8, double x9, double x10) {
  return x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10;
}

typedef struct { int a,b; short c; char d; } tipus_estructura_4;
typedef struct { int a; float b; double c; } tipus_estructura_5;
typedef struct { unsigned char a[3]; } tipus_estructura_6;
typedef struct { long a, b, c; } tipus_estructura_7;

int estructura_cas_4(tipus_estructura_4 x, int n) {
  switch (n) {
  case 0: return x.a;
  case 1: return x.b;
  case 2: return x.c;
  default: return x.d;
  }
}

int estructura_cas_5(tipus_estructura_5 x, int n) {
  switch (n) {
  case 0: return x.a;
  case 1: return x.b;
  default: return x.c;
  }
}

int estructura_cas_6(tipus_estructura_6 x, int n) {
  return x.a[n];
}

int estructura_cas_7(tipus_estructura_7 x, int n) {
  switch (n) {
  case 0: return x.a;
  case 1: return x.b;
  default: return x.c;
  }
}

tipus_estructura_4 estructura_cas_24(void) {
  return (tipus_estructura_4){10, 20, 30, 40};
}

tipus_estructura_5 estructura_cas_25(void) {
  return (tipus_estructura_5){10, 20, 30};
}

tipus_estructura_6 estructura_cas_26(void) {
  return (tipus_estructura_6){10, 20, 30};
}

typedef struct { unsigned char a[10]; } tipus_estructura_20;
typedef struct { unsigned char a[20]; } tipus_estructura_21;

tipus_estructura_20 estructura_cas_27(void) {
  return (tipus_estructura_20){10, 20, 30, 40, 50, 60, 70, 80, 90, 100};
}

tipus_estructura_21 estructura_cas_28(void) {
  return (tipus_estructura_21){1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20};
}
